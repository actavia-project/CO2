<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actavia Project</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <link rel="icon" type="image/png" href="image-properties/actavia-project-icon.png">
    <link rel="apple-touch-icon" href="image-properties/actavia-project-icon.png">
    <link rel="stylesheet" href="Dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    
<div id="loading-overlay" class="loading-hidden">
    <div class="spinner"></div>
    <p>Running Program</p>
</div>
<div id="feedback-overlay" class="feedback-overlay" onclick="closeFeedback()">
    <div class="feedback-card">
        <div id="feedback-icon" class="feedback-icon"></div>
        <h2 id="feedback-status"></h2>
        <p style="color: #666; font-size: 12px;">Tap anywhere to continue</p>
    </div>
</div>
<div class="menu-container">
    <div class="menu-welcome">
        <img src="image-properties/actavia-project-brand.png" alt="" style="width: 100%;">
    </div>
    <div class="home-feature" onclick="showPage('home-page')"><i class="fa-solid fa-house" style="margin-right: 5px;"></i>Home</div>
    <div class="test-feature" onclick="showPage('test-page')"><i class="fa-solid fa-book" style="margin-right: 5px;"></i>Learning</div>
    <div class="exercise-feature" onclick="showPage('exercise-page')"><i class="fa-solid fa-chalkboard" style="margin-right: 5px;"></i>Training</div>
    <div class="report-feature" onclick="showPage('report-page')"><i class="fa-solid fa-file-contract" style="margin-right: 5px;"></i>Report</div>
    <div class="help-feature" onclick="showPage('help-page')"><i class="fa-solid fa-circle-info" style="margin-right: 5px;"></i>Help</div>
</div>

<div class="main-content">
    <div id="global-profile-header" class="page-profile-header">
        <div class="profile-left-group">
            <img src="pfp-user.jpg" alt="Profile" class="header-profile-pic">
            <div class="header-user-info">
                <span class="header-user-name">Guest Account</span>
                <span class="header-user-status">Beta Tester</span>
            </div>
        </div>
        <div class="coin-container-right">
            <div class="currency-wrapper">
                <img src="image-properties/acta-coins.png" alt="" class="coin-icon">
                <span class="coin-count">0</span>
                <button class="add-currency-btn" onclick="goToOffersTab()">+</button>
            </div>

            <div class="currency-wrapper">
                <img src="image-properties/acta-gems.png" alt="" class="gem-icon">
                <span class="gem-count">0</span>
                <button class="add-currency-btn" onclick="goToOffersTab()">+</button>
            </div>
        </div>
    </div>
    <div id="home-page" class="page active">
        <div class="page-header-row">
            <h1 class="home-title"><span class="home-title-colored">Home</span> Page</h1>
            <div id="digital-clock-home" class="realtime-clock">00:00:00 AM</div>
        </div>
        <div class="full-bg-cloud"></div>
        <div class="menu-image-text">
            <img src="image-properties/welcome-image.png" alt="" class="welcome-image">
            <div class="home-image-and-text">
                <h2 id="dynamic-greeting" class="menu-welcome-2" style="padding-right: 10px;padding-left: 10px;margin-bottom: 10px;">Selamat datang, Actavians!</h2>
                <p class="desc" style="padding-right: 10px;padding-left: 10px;">Selamat datang di project kami. Actavia Project adalah program yang berfokus dalam edukasi akuntansi bagi siswa SMA/SMK dan sederajat di seluruh Indonesia. Dibentuk pada 2026, Actavia Project memiliki tujuan untuk membentuk logika dan pengetahuan akuntansi untuk masa depan dan karir siswa di Indonesia. Program ini dibentuk oleh xxxx secara mandiri dengan peralatan dan waktu yang seadanya. Kami meminta maaf jika ada kekurangan dalam program kami dan mohon untuk mendukung program ini agar bisa terus berjalan. Gunakan program versi beta kami dengan maksimal, laporkan bug dan beri saran untuk program ini kedepannya. Itu saja, terimakasih.</p>
            </div>  
        </div>
        <div class="sub-nav-container">
            <div class="sub-nav-item active" onclick="showSubTab('news')">News</div>
            <div class="sub-nav-item" onclick="showSubTab('offers')">Offers</div>
            <div class="sub-nav-item" onclick="showSubTab('daily')">Daily Login</div>
            <div class="sub-nav-item" onclick="showSubTab('quest')">Quest</div>
        </div>

        <div class="sub-content-area">
            <div id="sub-news" class="sub-tab-content active">
                <h3 style="font-size: 15px;border-bottom: solid 1px black;">Latest News</h3>
                <p class="universal-desc">Update : Beta 1.00 (03/02/2026)</p>
                <ul class="universal-desc">
                <li>New submenu at Home Page</li>
                <li>Now you can play quiz mode</li>
                <li>Fix bugs and improving user interface</li>
                <li>Dark mode BETA version</li>
                <li>Add new question</li>
                </ul>
            </div>
            <div id="sub-offers" class="sub-tab-content">
                <h3 style="font-size: 15px;border-bottom: solid 1px black;">Special Offers</h3>
                <p class="universal-desc">Coming soon...</p>
            </div>
            <div id="sub-daily" class="sub-tab-content">
                <div class="daily-login-container">
                    <p class="daily-login-msg">Selamat datang kembali, Actavians! Silakan ambil hadiah harianmu.</p>
                    
                    <div class="reward-row" id="reward-row">
                        <div class="reward-card" data-day="1">
                            <span class="reward-day">Sen</span>
                            <div class="reward-icon-bg">
                                <img src="acta coins.png" class="reward-img">
                            </div>
                            <span class="reward-amount">10</span>
                        </div>
                        <div class="reward-card" data-day="2">
                            <span class="reward-day">Sel</span>
                            <div class="reward-icon-bg">
                                <img src="acta coins.png" class="reward-img">
                            </div>
                            <span class="reward-amount">10</span>
                        </div>
                        <div class="reward-card" data-day="3">
                            <span class="reward-day">Rab</span>
                            <div class="reward-icon-bg">
                                <img src="acta coins.png" class="reward-img">
                            </div>
                            <span class="reward-amount">20</span>
                        </div>
                        <div class="reward-card" data-day="4">
                            <span class="reward-day">Kam</span>
                            <div class="reward-icon-bg">
                                <img src="acta coins.png" class="reward-img">
                            </div>
                            <span class="reward-amount">20</span>
                        </div>
                        <div class="reward-card" data-day="5">
                            <span class="reward-day">Jum</span>
                            <div class="reward-icon-bg">
                                <img src="acta coins.png" class="reward-img">
                            </div>
                            <span class="reward-amount">30</span>
                        </div>
                        <div class="reward-card" data-day="6">
                            <span class="reward-day">Sab</span>
                            <div class="reward-icon-bg">
                                <img src="acta coins.png" class="reward-img">
                            </div>
                            <span class="reward-amount">30</span>
                        </div>
                        <div class="reward-card special" data-day="7">
                            <span class="reward-day">Min</span>
                            <div class="reward-icon-bg">
                                <img src="acta gems.png" class="reward-img">
                            </div>
                            <span class="reward-amount">1</span>
                        </div>
                    </div>
                </div>

                <button class="claim-button" id="claimRewardBtn" onclick="claimDailyReward()">Ambil Hadiah</button>
            </div>
            <div id="sub-quest" class="sub-tab-content">
                <h3 style="font-size: 15px;border-bottom: solid 1px black;">Active Quests</h3>
                <p class="universal-desc">Coming soon..</p>
            </div>
        </div>
    </div>

    <div id="exercise-page" class="page">
        <h1 class="exercise-title"><span class="exercise-title-colored">Exercise</span> Page</h1>
        <p class="exercise-title-desc">Please select these exercise to upgrade your skill, agent.</p>
        <div class="exercise-grid">
            <div class="exercise-card-v2" onclick="showPage('material-selection-page')">
                <div class="card-logo">
                    <img src="MC-icon-feature.png" alt="Quiz">
                </div>
                <div class="card-title">Quiz</div>
                <div class="card-desc">Asah kemampuan akuntansi Anda dengan kuis pilihan ganda yang interaktif.</div>
            </div>

            <div class="exercise-card-v2 locked" onclick="showPage('case-detail-page')">
                <div class="card-logo">
                    <img src="SC-icon-feature.png" alt="Study Case">
                </div>
                <div class="card-title">Study Case</div>
                <div class="card-desc">Analisis kasus keuangan nyata untuk memperdalam logika pembukuan Anda.</div>
            </div>

            <div class="exercise-card-v2 locked" onclick="showPage('cycle-detail-page')">
                <div class="card-logo">
                    <img src="AC-icon-feature.png" alt="Accounting Cycle">
                </div>
                <div class="card-title">Accounting Cycle</div>
                <div class="card-desc">Pahami alur lengkap siklus akuntansi dari jurnal hingga laporan keuangan.</div>
            </div>
        </div>
    </div>
    <div id="material-selection-page" class="page">
        <button onclick="showPage('exercise-page')" class="startbutton"> Kembali</button>
        <h1 class="quiz-title">Select Material</h1>
        <p class="quiz-title-desc">Choose the accounting topic you want to master today.</p>

        <div class="exercise-grid-v2">
            <div class="exercise-card" onclick="selectMaterial('Basics of Accounting')">
                <img src="basicsof-acc-icon.png" alt="" class="quiz-material-icon" >
                <p>Basics of Accounting</p>
            </div>
            <div class="exercise-card locked" onclick="selectMaterial('Cost Accounting')">
                <img src="cost-acc-icon.png" alt="" class="quiz-material-icon">
                <p>Financial Accounting</p>
            </div>
            <div class="exercise-card locked" onclick="selectMaterial('Financial Accounting')">
                <p>Service Accounting</p>
            </div>
            <div class="exercise-card locked" onclick="selectMaterial('Trading Accounting')">
                <p>Merchandising Accounting</p>
            </div>
            <div class="exercise-card locked" onclick="selectMaterial('Tax Accounting')">
                <p>Manufacturing Accounting</p>
            </div>
            <div class="exercise-card locked" onclick="selectMaterial('Government Accounting')">
                <p>Government Accounting</p>
            </div>
        </div>
    </div>
    <div id="quiz-detail-page" class="page">
        <button onclick="showPage('exercise-page')" class="startbutton"> Kembali</button>
        <h1 class="quiz-title">Quiz Room</h1>
        <p class="quiz-title-desc">Please choose your difficulty, number of question and learning material.</p>
        
        <div class="difficulty-title"><p>Difficulty</p></div>
        <div class="class-type">
            <span class="easy-class" onclick="selectDifficulty(this)">Easy</span>
            <span class="medium-class" onclick="selectDifficulty(this)">Medium</span>
            <span class="hard-class" onclick="selectDifficulty(this)">Hard</span>
        </div>
    
        <div class="NoQ-title"><p>Number of Question</p></div>
        <div class="NoQ-type">
            <span class="a-quest" onclick="selectNoQ(this)">5</span>
            <span class="b-quest" onclick="selectNoQ(this)">10</span>
            <span class="c-quest" onclick="selectNoQ(this)">15</span>
            <span class="d-quest" onclick="selectNoQ(this)">20</span>
            <span class="e-quest" onclick="selectNoQ(this)">25</span>
        </div>

        <div class="NoQ-title"><p>Sub Material</p></div>
        <div id="sub-material-container" class="sub-material-grid"></div>

        <div class="play-section-wrapper">
            <div class="stats-status-bar">
                <div class="status-item">
                    <div class="status-icon-bg energy-bg">
                        <img src="fingerprint-icon.png" class="status-icon">
                    </div>
                    <div class="status-info">
                        <span id="energy-count" class="status-value">5/5</span>
                        <span id="energy-refill-timer" class="status-label">Full</span>
                    </div>
                </div>

                <div class="status-item">
                    <div class="status-icon-bg coin-bg">
                        <img src="acta coins.png" class="status-icon">
                    </div>
                    <div class="status-info">
                        <span id="coin-cost-display" class="status-value">5</span>
                        <span class="status-label">Coins/Play</span>
                    </div>
                </div>
            </div>
            
            <button id="main-play-btn" class="play-button" onclick="startQuiz()">
                PLAY &rarr;
            </button>
        </div>
    </div>

    <div id="quiz-running-page" class="page">
        <div class="page-profile-header" style="margin-top: 10px;">
            <span id="quiz-progress" style="font-weight: bold; color: #007bff;">Question 1 of 5</span>
            <span id="display-id" style="font-size: 11px; color: #999; font-family: monospace;">ID: ---</span>
            <span id="quiz-timer">00:00</span>
        </div>
        <div class="quiz-container" style="margin-top: 20px;">
            <h3 id="display-question" style="margin-bottom: 20px;">Loading Question...</h3>
            <div id="options-container" class="options-column">
                </div>
        </div>
        <div class="play-container" style="margin-top: 20px; text-align: right;">
            <button id="next-btn" class="play-button" onclick="nextQuestion()" style="display: none;">Next &rarr;</button>
        </div>
    </div>

    <div id="result-page" class="page">
        <h1 class="exercise-title-colored">Quiz Completed!</h1>
        <div class="exercise-grid">
            <div class="exercise-card"><p>Correct</p><h2 id="stat-correct" style="color: green;">0</h2></div>
            <div class="exercise-card"><p>Wrong</p><h2 id="stat-wrong" style="color: red;">0</h2></div>
            <div class="exercise-card" style="grid-column: span 2;"><p>Final Score</p><h1 id="stat-score">0</h1></div>
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="showPage('exercise-page')" class="startbutton" style="flex:1">Back to Menu</button>
            <button onclick="renderReview()" class="startbutton" style="flex:1; background-color: #007bff; color: white;">Review Answers</button>
        </div>
        <div id="review-section" style="margin-top: 30px;"></div>
        <div style="text-align: right; margin-top: 30px;">
            <button class="play-button" onclick="startQuiz()">PLAY &rarr;</button>
        </div>
    </div>
    <div id="case-detail-page" class="page">
        <button onclick="showPage('exercise-page')" class="startbutton"> Kembali</button>
        <h1>Study Case Room</h1>
        <p>Daftar kasus analisis akan muncul di sini.</p>
    </div>

    <div id="cycle-detail-page" class="page">
        <button onclick="showPage('exercise-page')" class="startbutton"> Kembali</button>
        <h1>Accounting Cycle</h1>
        <p>Daftar kasus analisis akan muncul di sini.</p>
    </div>
    <div id="test-page" class="page">
        <h1 class="exercise-title"><span class="exercise-title-colored">Learning</span> Page</h1>
        <p class="exercise-title-desc">Ayo belajar untuk meningkatkan pemahaman akuntansi kamu!</p>
        
        <div class="learning-path-container">
            <div class="level-wrapper">
                <div id="node-1" class="level-node" onclick="openLevelPreview(1, 'Pengenalan Akuntansi', 'Easy', 'Memahami definisi dan kegunaan akuntansi dalam bisnis.')">
                    1
                </div>
                <div class="lvl-line"></div>
            </div>

            <div class="level-wrapper">
                <div id="node-2" class="level-node" onclick="openLevelPreview(2, 'Persamaan Dasar', 'Medium', 'Menguasai rumus Aset = Liabilitas + Ekuitas.')">
                    2
                </div>
                <div class="lvl-line"></div>
            </div>

            <div class="level-wrapper">
                <div id="node-3" class="level-node" onclick="openLevelPreview(3, 'Siklus Akuntansi', 'Hard', 'Mempelajari alur transaksi hingga laporan keuangan.')">
                    3
                </div>
            </div>
        </div>
        <div style="text-align: right; margin-bottom: 15px;">
            <button onclick="resetProgres()" class="btn-donate" style="background: #dc3545; color: white; font-size: 11px;">
                <i class="fa-solid fa-arrows-rotate"></i> Reset Progres (Beta Test)
            </button>
        </div>
    </div>

    <div id="levelPreviewModal" class="modal-bg" style="display:none;">
        <div class="modal-card">
            <h2 id="preview-level-name">Nama Level</h2>
            <div class="difficulty-tag" id="preview-difficulty">Easy</div>
            <hr>
            <p><strong>Objektif:</strong></p>
            <p id="preview-objective">Deskripsi tugas...</p>
            
            <button class="play-button" style="width: 100%;" onclick="startLevel()">PLAY</button>
            <button class="close-btn" onclick="closeLevelPreview()">Batal</button>
        </div>
    </div>

    <div id="report-page" class="page">
        <div class="report-header">
            <h2>Statistik Belajar</h2>
            <button onclick="resetStats()" class="btn-reset-report">
                <i class="fa-solid fa-trash-can"></i> Reset Statistik
            </button>
        </div>

        <div class="report-grid">
            <div class="report-card main-stats">
                <div class="chart-container">
                    <div class="circle-progress" id="correct-rate-circle">
                        <div class="inner-circle">
                            <span id="correct-rate-text">0%</span>
                            <small>Correct Rate</small>
                        </div>
                    </div>
                </div>
                
                <div class="stats-details">
                    <div class="stat-box">
                        <span class="label">Sesi Training</span>
                        <span class="value" id="training-sessions">0</span>
                    </div>
                    <div class="stat-box success">
                        <span class="label">Total Benar</span>
                        <span class="value" id="total-correct">0</span>
                    </div>
                    <div class="stat-box danger">
                        <span class="label">Total Salah</span>
                        <span class="value" id="total-wrong">0</span>
                    </div>
                </div>
            </div>

            <div class="report-card performance-card">
                <h3>Performa Level</h3>
                <div class="bar-chart" id="level-bar-chart">
                    </div>
            </div>
        </div>
    </div>
    <div id="help-page" class="page">
    <h1>Help & Support</h1>
        <p class="desc">Ada kendala? Hubungi tim support kami di: <strong>actavia.project@gmail.com</strong></p>
        
        <div class="exercise-card" style="flex-direction: column; align-items: flex-start; text-align: left;">
            <h3 style="margin-bottom: 0px;padding-bottom: 0px;">Support the Developer</h3>
            <p class="universal-desc" style="font-weight: normal;">Actavia Project dikembangkan secara mandiri. Dukungan Anda membantu kami menyewa server dan mengembangkan materi baru.</p>
            
            <div class="donation-wrapper">
                <a href="https://saweria.co/actapro" target="_blank" rel="noopener noreferrer" class="btn-donate btn-saweria">
                    â˜• Dukung via Saweria
                </a>
            </div>
            <div class="setting-item">
                <span class="universal-desc">Theme Mode (Light / Dark)</span>
                <div class="toggle-container">
                    <input type="checkbox" id="theme-toggle" onclick="toggleDarkMode()">
                    <label for="theme-toggle" class="toggle-label">
                        <span class="toggle-ball"></span>
                    </label>
                </div>
                <p id="mode-text" style="font-size: 11px; margin-top: 5px;">Light</p>
            </div>
        </div>
    </div>
</div>

<div id="welcomeModal" class="modal-bg">
    <div class="modal-card">
        <div class="modal-header">
            <h2 style="color: rgb(0, 98, 255);">Caution!</h2>
        </div>
        <div class="modal-body">
            <p style="font-size: 14px;">Hi, our agent. This project is early access (Beta Version) so you can explore our feature for free. Don't forget to report any bug or error to our email actavia.project.gmail.com. That's all, thank you!.</p>
        </div>
        <button id="closeBtn" class="close-btn">Agree</button>
    </div>
</div>

<div id="topup-modal" class="modal-bg" style="display: none;">
    <div class="modal-card">
        <div class="modal-header">
            <h2 id="topup-title" style="color: #007bff;">Top Up</h2>
        </div>
        <div class="modal-body">
            <p id="topup-desc">Pilih paket yang ingin Anda beli.</p>
            <div id="topup-options" class="exercise-grid">
                </div>
        </div>
        <button onclick="closeTopup()" class="close-btn" style="background-color: #666;">Close</button>
    </div>
</div>
<audio id="sound-correct" src="sound-properties/quiz-correct.mp3" preload="auto"></audio>
<audio id="sound-wrong" src="sound-properties/quiz-wrong.mp3" preload="auto"></audio>

<script src="Quiz-BOA.js"></script>
<script>
// ==========================================
// 1. VARIABEL GLOBAL & STATE
// ==========================================
let userCoins = parseInt(localStorage.getItem('acta_coins')) || 0;
let userGems = parseInt(localStorage.getItem('acta_gems')) || 0;
let energy = parseInt(localStorage.getItem('agent_energy')) || 5;
let lastRefillTime = parseInt(localStorage.getItem('last_refill_time')) || Date.now();
const MAX_ENERGY = 5;
const REFILL_TIME = 6 * 60; 

let selectedMaterialGlobal = "";
let currentQuestions = [];
let userAnswers = [];
let currentQuestionIndex = 0;
let quizTimerInterval; 
let totalSeconds = 0;

const quizDatabase = {
    'Basics of Accounting': ['Accounting Equation', 'Journal Entry', 'Ledger', 'Trial Balance','Adjustment','Worksheet', 'Financial Statement'],
    'Cost Accounting': ['Material Cost', 'Labor Cost', 'Overhead'],
    'Financial Accounting': ['Balance Sheet', 'Income Statement', 'Cash Flow'],
    'Trading Accounting': ['Inventory', 'Purchase & Sales', 'Cost of Goods Sold'],
    'Tax Accounting': ['VAT (PPN)', 'Income Tax', 'Tax Report'],
    'Government Accounting': ['Public Fund', 'Budgeting', 'State Assets']
};

// ==========================================
// 2. NAVIGASI UTAMA (PERBAIKAN)
// ==========================================
function showPage(pageId) {
    const overlay = document.getElementById('loading-overlay');
    const globalHeader = document.getElementById('global-profile-header');
    
    if (overlay) overlay.classList.remove('loading-hidden');

    setTimeout(() => {
        // Logika Header
        if (globalHeader) {
            globalHeader.style.display = (pageId === 'help-page') ? 'none' : 'flex';
        }

        // Sembunyikan semua halaman
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        
        // Tampilkan halaman target
        const target = document.getElementById(pageId);
        if (target) {
            target.classList.add('active');
        } else {
            console.error("Page ID tidak ditemukan: " + pageId);
        }

        // Update Status Menu Active
        document.querySelectorAll('.menu-container div').forEach(item => {
            item.classList.remove('active');
            const action = item.getAttribute('onclick');
            if (action && action.includes(pageId)) {
                item.classList.add('active');
            }
        });

        if (pageId === 'report-page') renderReport();
        if (overlay) overlay.classList.add('loading-hidden');
    }, 300);
}

// ==========================================
// 3. LOGIKA MODAL & INITIALIZATION
// ==========================================
document.addEventListener("DOMContentLoaded", () => {
    // Perbaikan Tombol Agree
    const welcomeModal = document.getElementById('welcomeModal');
    const closeBtn = document.getElementById('closeBtn');
    const hasSeenWarning = localStorage.getItem('seenWarning');

    if (!hasSeenWarning && welcomeModal) {
        welcomeModal.style.display = 'flex';
    } else if (welcomeModal) {
        welcomeModal.style.display = 'none';
    }

    if (closeBtn) {
        closeBtn.onclick = () => {
            welcomeModal.style.display = 'none';
            localStorage.setItem('seenWarning', 'true');
        };
    }

    // Init sistem lainnya
    refreshCurrencyUI();
    updateDailyLoginUI();
    updateEnergySystem();
    updateGreeting();
    setInterval(updateEnergySystem, 1000);
    setInterval(updateDigitalClock, 1000);
});

// ==========================================
// 4. SISTEM MATERI & QUIZ
// ==========================================
function selectMaterial(name) {
    // Batasan Materi Beta
    const allowed = ['Basics of Accounting'];
    if (!allowed.includes(name)) {
        alert("Materi ini masih terkunci di versi Beta!");
        return;
    }

    selectedMaterialGlobal = name;
    const subCont = document.getElementById('sub-material-container');
    if (!subCont) return;

    subCont.innerHTML = "";
    (quizDatabase[name] || []).forEach(sub => {
        const div = document.createElement('div');
        div.className = 'sub-item';
        div.innerText = sub;
        div.onclick = function() {
            const activeCount = subCont.querySelectorAll('.sub-item.active').length;
            if (activeCount >= 5 && !this.classList.contains('active')) {
                alert("Maksimal 5 sub-materi!"); return;
            }
            this.classList.toggle('active');
        };
        subCont.appendChild(div);
    });
    showPage('quiz-detail-page');
}

// Tambahkan fungsi pendukung lainnya (updateDigitalClock, refreshCurrencyUI, dll) di bawah sini...
// Pastikan tidak ada fungsi showPage() atau selectMaterial() lain di bawah ini.
</script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCFvlrjNaf6rZvMtYDSnICnQb2toKbTgYA",
    authDomain: "actavia-project-38823.firebaseapp.com",
    projectId: "actavia-project-38823",
    storageBucket: "actavia-project-38823.firebasestorage.app",
    messagingSenderId: "19350147415",
    appId: "1:19350147415:web:7999c49ff1f233f0262e12"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Fungsi Proteksi Halaman & Ambil Data
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      // User Sedang Login, ambil datanya dari Firestore
      const docRef = doc(db, "users", user.uid);
      const docSnap = await getDoc(docRef);

      if (docSnap.exists()) {
        const userData = docSnap.data();
        
        // Update Tampilan (Sesuaikan ID-nya dengan yang ada di HTML Dashboard kamu)
        if(document.getElementById('user-name')) {
            document.getElementById('user-name').innerText = userData.fullname || userData.name;
        }
        console.log("Data User Berhasil Dimuat:", userData);
      }
    } else {
      // Jika tidak ada user login, kembalikan ke halaman login
      window.location.href = 'login2.html';
    }
  });
</script>

</body>
</html>